<script setup lang="ts">
import { ref, onUpdated } from 'vue'
import { useRouter, useRoute } from 'vue-router'
type name = string | null
const router = useRouter()
const route = useRoute()
let username = ref<name>('')
const logout = (): void => {
  localStorage.removeItem('username')
  router.push('/login')
}
onUpdated(() => {
  if (localStorage.getItem('username')) {
    username.value = localStorage.getItem('username')
  } else {
    router.push('/login')
  }
})
</script>

<template>
  <div class="header">
    <span v-if="route.name != 'login'">{{ username }}</span>
    <button v-if="route.name != 'login'" @click="logout()">
      <svg
        width="25"
        height="25"
        viewBox="0 0 25 25"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clip-path="url(#clip0_503_2694)">
          <path
            d="M23.8977 13.0537C23.9028 13.0486 23.9028 13.0486 23.9079 13.0435C23.9232 13.0231 23.9385 13.0078 23.9487 12.9873C23.9539 12.9822 23.9539 12.9771 23.959 12.972C23.9692 12.9516 23.9845 12.9312 23.9947 12.9108C23.9947 12.9057 23.9998 12.9006 23.9998 12.9006C24.01 12.8802 24.0202 12.8598 24.0304 12.8343C24.0304 12.8292 24.0304 12.8292 24.0355 12.824C24.0457 12.8036 24.0508 12.7781 24.061 12.7526C24.061 12.7475 24.061 12.7424 24.0661 12.7424C24.0712 12.7169 24.0814 12.6965 24.0814 12.671C24.0814 12.6607 24.0814 12.6556 24.0865 12.6454C24.0916 12.625 24.0916 12.6046 24.0967 12.5842C24.1018 12.5536 24.1018 12.5281 24.1018 12.4975C24.1018 12.4668 24.1018 12.4413 24.0967 12.4107C24.0967 12.3903 24.0916 12.3699 24.0865 12.3495C24.0865 12.3393 24.0865 12.3342 24.0814 12.3239C24.0763 12.2984 24.0712 12.278 24.0661 12.2525C24.0661 12.2474 24.0661 12.2423 24.061 12.2423C24.0559 12.2168 24.0457 12.1964 24.0355 12.1709C24.0355 12.1658 24.0355 12.1658 24.0304 12.1606C24.0202 12.1402 24.01 12.1147 23.9998 12.0943C23.9998 12.0892 23.9947 12.0841 23.9947 12.0841C23.9845 12.0637 23.9743 12.0433 23.959 12.0229C23.9539 12.0178 23.9539 12.0127 23.9487 12.0076C23.9334 11.9871 23.9232 11.9667 23.9079 11.9514C23.9028 11.9463 23.9028 11.9463 23.8977 11.9412C23.8773 11.9208 23.862 11.8953 23.8365 11.8749L18.7895 6.83303C18.4476 6.49112 17.8914 6.49112 17.5495 6.83303C17.2076 7.17494 17.2076 7.73117 17.5495 8.07308L21.1012 11.6248H6.981C6.49621 11.6248 6.10327 12.0178 6.10327 12.4975C6.10327 12.9822 6.49621 13.3752 6.981 13.3752H21.1063L17.5801 16.9014C17.2382 17.2433 17.2382 17.7996 17.5801 18.1415C17.7485 18.3099 17.973 18.3966 18.1976 18.3966C18.4221 18.3966 18.6466 18.3099 18.815 18.1415L23.8314 13.1251C23.8569 13.0945 23.8773 13.0741 23.8977 13.0537Z"
            fill="white"
          />
          <path
            d="M5.6491 1.75036H12.181C12.6658 1.75036 13.0588 1.35743 13.0588 0.877738C13.0588 0.392945 12.6658 7.62939e-06 12.181 7.62939e-06H5.6491C3.03122 7.62939e-06 0.898132 2.1331 0.898132 4.75098V20.249C0.898132 22.8669 3.03122 25 5.6491 25H12.0739C12.5587 25 12.9516 24.6071 12.9516 24.1274C12.9516 23.6426 12.5587 23.2497 12.0739 23.2497H5.6491C3.9957 23.2497 2.64849 21.9024 2.64849 20.249V4.75098C2.65359 3.09248 3.9957 1.75036 5.6491 1.75036Z"
            fill="white"
          />
        </g>
        <defs>
          <clipPath id="clip0_503_2694">
            <rect width="25" height="25" fill="white" />
          </clipPath>
        </defs>
      </svg>
    </button>
  </div>
</template>

<style lang="scss" scoped>
.header {
  padding: 5px 16px;
  background: #58aeed;
  display: flex;
  justify-content: space-between;
  align-items: center;

  button {
    background: transparent;
    border: 0;
  }

  span {
    color: #fff;
  }
}

.home {
  max-width: 768px;
  margin: 0 auto;
}
</style>
